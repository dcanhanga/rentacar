import { dirname, join } from 'path';
import { fileURLToPath } from 'url';
const __filename = fileURLToPath(import.meta.url);
const __dirname = dirname(__filename);
const databasePath = join(__dirname, 'src', 'app', 'database', 'database.db');
const knexPath = join(
  __dirname,
  'src',
  'app',
  'database',
  'knex',
  'migrations',
);
export default {
  development: {
    client: 'sqlite3',
    connection: {
      filename: databasePath,
    },
    pool: {
      afterCreate: (conn, cb) => conn.run('PRAGMA foreign_keys = ON', cb),
    },
    migrations: {
      directory: knexPath,
    },
    useNullAsDefault: true,
  },
};
